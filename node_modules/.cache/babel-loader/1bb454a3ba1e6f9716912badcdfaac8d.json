{"ast":null,"code":"var _jsxFileName = \"/Users/hannahkofkin/Development/code/mod-5-project/front-end/src/components/Recipe-Detail-Page/RecipeDetail.js\";\nimport React, { useState, useEffect } from 'react';\nimport RatingExampleClearable from './AverageRating';\nimport CommentContainer from './CommentContainer';\nimport { useHistory } from 'react-router-dom';\nimport EditRecipe from './EditRecipe';\nexport default function RecipeDetail(props) {\n  console.log(props);\n  const [state, setState] = useState({});\n  const [comment, setComment] = useState({});\n  const [showEditForm, setShowEditForm] = useState(false);\n  const [editState, setEditState] = useState(\"\");\n  const [formState, setFormState] = useState({\n    image: \"\",\n    video: \"\",\n    title: \"\",\n    ingred_list: \"\",\n    description: \"\"\n  }); // const showEditForm = (recipeObj) => {\n  //     setRecipeForm(true);\n  //     setFormState({\n  //         image: recipeObj.image,\n  //         video: recipeObj.video,\n  //         title: recipeObj.title,\n  //         ingred_list: recipeObj.ingred_list,\n  //         description: recipeObj.description,\n  //     });\n  // }\n  // console.log(\"recipe form state\", recipeForm);\n  // console.log(\"comm\", comment);\n\n  const user = props.user; // console.log(user.id)\n\n  console.log(state);\n  const history = useHistory();\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n        \"Accept\": \"application/json\"\n      }\n    }).then(r => r.json()).then(recipeObj => {\n      setState(recipeObj);\n    });\n  }, []);\n  console.log(state);\n\n  const handleDelete = () => {\n    const token = localStorage.getItem(\"token\");\n    fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n        \"Accept\": \"application/json\"\n      }\n    }).then(r => r.json()).then(deletedComment => {\n      history.push('/recipes');\n    });\n  };\n\n  const handleUpdate = recipeObj => {\n    const token = localStorage.getItem(\"token\");\n    fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify(recipeObj)\n    }).then(r => r.json()).then(updatedRecipe => {\n      console.log(updatedRecipe);\n      setState(updatedRecipe);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, state.title), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, state.ingred_list), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, state.description), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"video\", {\n    controls: true,\n    width: \"250\",\n    src: state.video,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }), state.user_id === user.id && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EditRecipe, {\n    handleUpdate: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, \"Delete Recipe\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(RatingExampleClearable, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CommentContainer, {\n    user: props.user,\n    recipe: state,\n    comments: state.comments,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/hannahkofkin/Development/code/mod-5-project/front-end/src/components/Recipe-Detail-Page/RecipeDetail.js"],"names":["React","useState","useEffect","RatingExampleClearable","CommentContainer","useHistory","EditRecipe","RecipeDetail","props","console","log","state","setState","comment","setComment","showEditForm","setShowEditForm","editState","setEditState","formState","setFormState","image","video","title","ingred_list","description","user","history","token","localStorage","getItem","fetch","match","params","id","method","headers","then","r","json","recipeObj","handleDelete","deletedComment","push","handleUpdate","Authorization","Accept","body","JSON","stringify","updatedRecipe","user_id","comments"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport RatingExampleClearable from './AverageRating'\nimport CommentContainer from './CommentContainer'\nimport { useHistory } from 'react-router-dom'\nimport EditRecipe from './EditRecipe'\n\nexport default function RecipeDetail(props) {\n    console.log(props)\n    const [state, setState] = useState({});\n    const [comment, setComment] = useState({});\n    const [showEditForm, setShowEditForm] = useState(false); \n    const [editState, setEditState] = useState(\"\");\n    const [formState, setFormState] = useState({\n      image: \"\",\n      video: \"\",\n      title: \"\",\n      ingred_list: \"\",\n      description: \"\",\n    });\n\n    // const showEditForm = (recipeObj) => {\n    //     setRecipeForm(true);\n    //     setFormState({\n    //         image: recipeObj.image,\n    //         video: recipeObj.video,\n    //         title: recipeObj.title,\n    //         ingred_list: recipeObj.ingred_list,\n    //         description: recipeObj.description,\n    //     });\n    // }\n\n    // console.log(\"recipe form state\", recipeForm);\n    // console.log(\"comm\", comment);\n    const user = props.user\n    // console.log(user.id)\n    console.log(state)\n    const history = useHistory();\n\n    useEffect(() => {\n      const token = localStorage.getItem(\"token\")\n      fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n            \"Accept\": \"application/json\"\n        }\n      })\n        .then((r) => r.json())\n        .then((recipeObj) => {\n          setState(recipeObj);\n        });\n    }, []);\n    console.log(state)\n\n    const handleDelete = () => {\n      const token = localStorage.getItem(\"token\")\n      fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n        method: \"DELETE\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n            \"Accept\": \"application/json\"\n        }\n      })\n        .then((r) => r.json())\n        .then(deletedComment => {\n          history.push('/recipes')\n        })\n    }\n\n    const handleUpdate = (recipeObj) => {\n      const token = localStorage.getItem(\"token\")\n      fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\",\n        },\n        body: JSON.stringify(recipeObj)\n      })\n        .then((r) => r.json())\n        .then(updatedRecipe => {\n          console.log(updatedRecipe)\n          setState(updatedRecipe)\n        })\n    }\n\n    return (\n        <div>\n            <h4>{state.title}</h4>\n            <br></br>\n            <p>{state.ingred_list}</p>\n            <br></br>\n            <p>{state.description}</p>\n            <br></br>\n            <video controls width=\"250\" src={state.video}></video>\n            <br></br>\n            {state.user_id === user.id && (\n              <>\n                <EditRecipe\n                    handleUpdate={handleUpdate}\n                />\n                {/* <button onClick={handleEdit}>Edit Recipe</button> */}\n                <button onClick={handleDelete}>Delete Recipe</button>\n              </>\n            )}\n            <hr></hr>\n            <RatingExampleClearable />\n            <hr></hr>\n            <CommentContainer user={props.user} recipe={state} comments={state.comments}/>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}