{"ast":null,"code":"var _jsxFileName = \"/Users/hannahkofkin/Development/code/mod-5-project/front-end/src/components/Recipe-Detail-Page/RecipeDetail.js\";\nimport React, { useState, useEffect, component } from 'react';\nimport RatingExampleClearable from './AverageRating';\nimport CommentContainer from './CommentContainer';\nimport { useHistory } from 'react-router-dom';\nimport EditRecipe from './EditRecipe';\nimport './RecipeDetail.css';\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition';\nimport ReactHover from 'react-hover';\nimport { Button, Popup } from 'semantic-ui-react';\nexport default function RecipeDetail(props) {\n  const [state, setState] = useState({});\n  const [voiceOn, setVoiceOn] = useState(false);\n  const user = props.user;\n  const history = useHistory();\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n        \"Accept\": \"application/json\"\n      }\n    }).then(r => r.json()).then(recipeObj => {\n      setState(recipeObj);\n    });\n  }, []); // console.log(state)\n  // **** VOICE COMMAND SECTION **** //\n\n  let video = document.getElementById('video');\n  const commands = [{\n    command: 'Play',\n    callback: () => video.play()\n  }, {\n    command: 'Pause',\n    callback: () => video.pause()\n  }, {\n    command: 'Rewind',\n    callback: () => video.currentTime -= 10\n  }, {\n    command: 'Fast Forward',\n    callback: () => video.currentTime += 10\n  }, {\n    command: 'Mute',\n    callback: () => video.muted = true\n  }, {\n    command: 'Unmute',\n    callback: () => video.muted = false\n  }, {\n    command: 'clear',\n    callback: ({\n      resetTranscript\n    }) => resetTranscript()\n  }];\n  const {\n    transcript,\n    resetTranscript\n  } = useSpeechRecognition({\n    commands\n  }); // console.log(transcript)\n\n  if (!SpeechRecognition.browserSupportsSpeechRecognition()) {\n    return null;\n  }\n\n  const listen = () => {\n    SpeechRecognition.startListening({\n      continuous: true\n    });\n    setVoiceOn(true);\n  };\n\n  const stopListening = () => {\n    SpeechRecognition.stopListening();\n    setVoiceOn(false);\n  }; // CONTINUED RECIPE DETAIL ACTIONS\n\n\n  const handleDelete = () => {\n    const token = localStorage.getItem(\"token\");\n    fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n        \"Accept\": \"application/json\"\n      }\n    }).then(r => r.json()).then(deletedRecipe => {\n      history.push('/recipes');\n    });\n  };\n\n  const handleUpdate = recipeObj => {\n    const token = localStorage.getItem(\"token\");\n    const form = new FormData(); // form.append(\"image\", recipeObj.image)\n    // form.append(\"video\", recipeObj.video)\n\n    form.append(\"title\", recipeObj.title);\n    form.append(\"ingred_list\", recipeObj.ingred_list);\n    form.append(\"description\", recipeObj.description);\n    form.append(\"ingredients\", JSON.stringify(recipeObj.ingredients));\n    form.append(\"recipe_steps\", JSON.stringify(recipeObj.recipe_steps));\n    fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n      body: form\n    }).then(r => r.json()).then(updatedRecipe => {\n      // console.log(updatedRecipe)\n      setState(updatedRecipe);\n    });\n  };\n\n  const renderIngredients = () => {\n    const ingredientsArray = state.ingredients.sort(); // console.log(ingredientsArray)\n\n    return ingredientsArray.map(ingredient =>\n    /*#__PURE__*/\n    // console.log(ingredient)\n    React.createElement(\"p\", {\n      id: \"ingredient\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, ingredient.ingred_detail));\n  };\n\n  const renderRecipeSteps = () => {\n    const recipeStepsArray = state.recipe_steps.sort();\n    return recipeStepsArray.map(step => /*#__PURE__*/React.createElement(\"li\", {\n      id: \"recipe-directions-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, step.step_detail));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recipe-detail-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"spacer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, state.title), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"recipe-author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, \"By: \", state.author), /*#__PURE__*/React.createElement(\"span\", {\n    id: \"button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, state.user_id === user.id && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EditRecipe, {\n    handleUpdate: handleUpdate,\n    recipeObj: state // setShowEditForm={setShowEditForm}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDelete,\n    className: \"buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://res.cloudinary.com/hsk23/image/upload/v1597717386/Food%20Feed/3058-200_gkxsdp.png\",\n    width: \"20%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 74\n    }\n  })))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"video\", {\n    controls: true,\n    width: \"400\",\n    src: state.video,\n    id: \"video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }), !voiceOn ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: listen,\n    className: \"voice-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, \"Turn On Voice Command\") : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: stopListening,\n    className: \"voice-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 108\n    }\n  }, \"Turn Off Voice Command\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"section\", {\n    id: \"ingred-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    id: \"ingredients-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, \"Ingredient List:\"), /*#__PURE__*/React.createElement(\"span\", {\n    id: \"recipe-ingred-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, state.ingredients && renderIngredients()), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"section\", {\n    id: \"ingred-steps-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    id: \"directions-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }, \"Directions:\"), /*#__PURE__*/React.createElement(\"ol\", {\n    id: \"recipe-directions-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, state.recipe_steps && renderRecipeSteps())), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CommentContainer, {\n    user: props.user,\n    recipe: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/hannahkofkin/Development/code/mod-5-project/front-end/src/components/Recipe-Detail-Page/RecipeDetail.js"],"names":["React","useState","useEffect","component","RatingExampleClearable","CommentContainer","useHistory","EditRecipe","SpeechRecognition","useSpeechRecognition","ReactHover","Button","Popup","RecipeDetail","props","state","setState","voiceOn","setVoiceOn","user","history","token","localStorage","getItem","fetch","match","params","id","method","headers","then","r","json","recipeObj","video","document","getElementById","commands","command","callback","play","pause","currentTime","muted","resetTranscript","transcript","browserSupportsSpeechRecognition","listen","startListening","continuous","stopListening","handleDelete","deletedRecipe","push","handleUpdate","form","FormData","append","title","ingred_list","description","JSON","stringify","ingredients","recipe_steps","Authorization","body","updatedRecipe","renderIngredients","ingredientsArray","sort","map","ingredient","ingred_detail","renderRecipeSteps","recipeStepsArray","step","step_detail","author","user_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, component } from 'react'\nimport RatingExampleClearable from './AverageRating'\nimport CommentContainer from './CommentContainer'\nimport { useHistory } from 'react-router-dom'\nimport EditRecipe from './EditRecipe'\nimport './RecipeDetail.css'\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition'\nimport ReactHover from 'react-hover'\nimport { Button, Popup } from 'semantic-ui-react'\n\n\nexport default function RecipeDetail(props) {\n    const [state, setState] = useState({});\n    const [voiceOn, setVoiceOn] = useState(false); \n\n    const user = props.user\n    const history = useHistory();\n\n    useEffect(() => {\n      const token = localStorage.getItem(\"token\")\n      fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n          method: \"GET\",\n          headers: {\n              \"Content-Type\": \"application/json\",\n              \"Authorization\": `Bearer ${token}`,\n              \"Accept\": \"application/json\"\n        }\n      })\n          .then((r) => r.json())\n          .then((recipeObj) => {\n            setState(recipeObj);\n          });\n    }, []);\n    // console.log(state)\n\n    // **** VOICE COMMAND SECTION **** //\n\n    let video = document.getElementById('video')\n\n    const commands = [\n        {\n          command: 'Play',\n          callback: () => video.play()\n        },\n        {\n          command: 'Pause',\n          callback: () => video.pause()\n        },\n        {\n          command: 'Rewind',\n          callback: () => video.currentTime-=10\n        },\n        {\n          command: 'Fast Forward',\n          callback: () => video.currentTime+=10\n        },\n        {\n          command: 'Mute',\n          callback: () => video.muted=true\n        },\n        {\n          command: 'Unmute',\n          callback: () => video.muted=false\n        },\n        {\n          command: 'clear',\n          callback: ({ resetTranscript }) => resetTranscript()\n        }\n    ]\n\n    const { transcript, resetTranscript } = useSpeechRecognition({ commands })\n    // console.log(transcript)\n\n    if (!SpeechRecognition.browserSupportsSpeechRecognition()) {\n        return null\n    }\n\n    const listen = () => {\n        SpeechRecognition.startListening({ continuous: true })\n        setVoiceOn(true)\n    }\n\n    const stopListening = () => {\n        SpeechRecognition.stopListening()\n        setVoiceOn(false)\n    }\n\n    // CONTINUED RECIPE DETAIL ACTIONS\n\n    const handleDelete = () => {\n        const token = localStorage.getItem(\"token\")\n        fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n            method: \"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`,\n                \"Accept\": \"application/json\"\n            }\n        })\n            .then((r) => r.json())\n            .then(deletedRecipe => {\n                history.push('/recipes')\n            })\n    }\n\n    const handleUpdate = (recipeObj) => {\n        const token = localStorage.getItem(\"token\")\n        const form = new FormData()\n        // form.append(\"image\", recipeObj.image)\n        // form.append(\"video\", recipeObj.video)\n        form.append(\"title\", recipeObj.title)\n        form.append(\"ingred_list\", recipeObj.ingred_list)\n        form.append(\"description\", recipeObj.description)\n        form.append(\"ingredients\", JSON.stringify(recipeObj.ingredients))\n        form.append(\"recipe_steps\", JSON.stringify(recipeObj.recipe_steps))\n        fetch(`http://localhost:3000/recipes/${props.match.params.id}`, {\n            method: \"PATCH\",\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n            body: form,\n        })\n            .then((r) => r.json())\n            .then(updatedRecipe => {\n              // console.log(updatedRecipe)\n                setState(updatedRecipe)\n            })\n    }\n\n    const renderIngredients = () => {\n        const ingredientsArray = state.ingredients.sort()\n        // console.log(ingredientsArray)\n        return ingredientsArray.map((ingredient) => (\n            // console.log(ingredient)\n            <p id=\"ingredient\">{ingredient.ingred_detail}</p>\n        ))\n    }\n\n    const renderRecipeSteps = () => {\n        const recipeStepsArray = state.recipe_steps.sort()\n        return recipeStepsArray.map((step => (\n            <li id=\"recipe-directions-list\">{step.step_detail}</li>\n        )))\n    }\n\n\n\n    return (\n        <div className=\"recipe-detail-container\">\n            <div id=\"spacer\" />\n            <p id=\"recipe-title\">{state.title}</p>\n            <p id=\"recipe-author\">By: {state.author}</p>\n            <span id=\"button-container\">\n                {state.user_id === user.id && (\n                  <>\n                      <EditRecipe\n                          handleUpdate={handleUpdate}\n                          recipeObj={state}\n                          // setShowEditForm={setShowEditForm}\n                      />\n                      <button onClick={handleDelete} className=\"buttons\"><img src=\"https://res.cloudinary.com/hsk23/image/upload/v1597717386/Food%20Feed/3058-200_gkxsdp.png\" width=\"20%\"/></button>\n                      {/* <button onClick={handleEdit}>Edit Recipe</button> */}\n                  </>\n                )}\n            </span>\n            <br></br>\n\n\n            <video controls width=\"400\" src={state.video} id=\"video\"></video>\n            {!voiceOn ? <button onClick={listen} className=\"voice-button\">Turn On Voice Command</button> : <button onClick={stopListening} className=\"voice-button\">Turn Off Voice Command</button>}\n            <br></br>\n            <section id=\"ingred-container\">\n                <p id=\"ingredients-title\">Ingredient List:</p>\n                <span id=\"recipe-ingred-list\">\n                    {state.ingredients && renderIngredients()}\n                </span>\n                <br></br>\n            </section>\n            <section id=\"ingred-steps-container\">\n                <p id=\"directions-title\">Directions:</p>\n                <ol id=\"recipe-directions-list\">\n                    {state.recipe_steps && renderRecipeSteps()}\n                </ol>\n            </section>\n            <hr></hr>\n            <CommentContainer user={props.user} recipe={state} />\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}