{"ast":null,"code":"var _jsxFileName = \"/Users/hannahkofkin/Development/code/mod-5-project/front-end/src/components/Recipes-Page/AddRecipe.js\";\nimport React, { useState, Fragment } from 'react';\nimport styled from 'styled-components';\nimport LoadingBar from './LoadingBar';\nexport default function AddRecipe(props) {\n  const [state, setState] = useState({\n    image: \"\",\n    video: \"\",\n    title: \"\" // ingredients: [{ingred_detail: ''}],\n    // recipe_steps: [{step_detail: ''}]\n\n  });\n  const [ingredientState, setIngredientState] = useState([{\n    ingred_detail: ''\n  }]);\n  const [recipeStepState, setRecipeStepState] = useState([{\n    step_detail: ''\n  }]);\n\n  const displayFormHandler = () => {\n    props.setRecipeForm(prevState => {\n      return !prevState;\n    });\n  };\n\n  const changeHandler = e => {\n    e.persist();\n    props.setFormState(prevState => ({ ...prevState,\n      [e.target.name]: e.target.value\n    }));\n    console.log(props.formState);\n  };\n\n  const handleIngredientChange = (index, e) => {\n    e.persist();\n    const values = [...ingredientState];\n    values[index].ingred_detail = e.target.value;\n    setIngredientState(values);\n    props.setFormState(prevState => ({ ...prevState,\n      ingredients: values\n    }));\n    console.log(props.formState);\n  };\n\n  const handleRecipeStepChange = (index, e) => {\n    e.persist();\n    const values = [...recipeStepState];\n    values[index].step_detail = e.target.value;\n    setRecipeStepState(values);\n    props.setFormState(prevState => ({ ...prevState,\n      recipe_steps: values\n    }));\n    console.log(props.formState);\n  };\n\n  const changeHandlerFiles = e => {\n    e.persist();\n    props.setFormState(prevState => ({ ...prevState,\n      [e.target.name]: e.target.files[0]\n    }));\n    console.log(props.formState);\n  };\n\n  const handleAddIngredientFields = () => {\n    const values = [...ingredientState];\n    values.push({\n      ingred_detail: ''\n    });\n    setIngredientState(values);\n  };\n\n  const handleRemoveIngredientFields = index => {\n    const values = [...ingredientState];\n    values.splice(index, 1);\n    setIngredientState(values);\n  };\n\n  const handleAddStepFields = () => {\n    const values = [...recipeStepState];\n    values.push({\n      step_detail: ''\n    });\n    setRecipeStepState(values);\n  };\n\n  const handleRemoveStepFields = index => {\n    const values = [...recipeStepState];\n    values.splice(index, 1);\n    setRecipeStepState(values);\n  }; // const activateLoadBar = () => {\n  //     return <LoadingBar />\n  // }\n\n\n  const handleRecipeCreation = e => {\n    props.activateLoadBar();\n    e.preventDefault();\n    console.log(\"ingredients state\", ingredientState);\n    console.log(\"recipe state\", props.formState);\n    const token = localStorage.getItem(\"token\");\n    const form = new FormData();\n    form.append(\"image\", props.formState.image);\n    form.append(\"video\", props.formState.video);\n    form.append(\"title\", props.formState.title);\n    form.append(\"ingredients\", JSON.stringify(props.formState.ingredients));\n    form.append(\"recipe_steps\", JSON.stringify(props.formState.recipe_steps));\n    fetch(\"http://localhost:3000/recipes\", {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      },\n      body: form\n    }).then(r => r.json()).then(newRecipe => {\n      console.log(newRecipe);\n      props.renderNewRecipe(prevState => [newRecipe, ...prevState]);\n      props.setRecipeForm(false);\n    });\n    props.setFormState({\n      image: \"\",\n      video: \"\",\n      title: \"\",\n      ingredients: [{\n        ingred_detail: ''\n      }],\n      recipe_steps: [{\n        step_detail: ''\n      }]\n    });\n  };\n\n  const showLoadBar = () => {\n    return /*#__PURE__*/React.createElement(LoadingBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 16\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.recipeForm ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, \"New Recipe\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleRecipeCreation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \"Image Upload:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"image\",\n    onChange: changeHandlerFiles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, \"Video Upload\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"video\",\n    onChange: changeHandlerFiles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, \"Title:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    onChange: changeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, \"Ingredient List:\"), ingredientState.map((ingredient, index) => /*#__PURE__*/React.createElement(Fragment, {\n    key: `${ingredient}~${index}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"ingred_detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 37\n    }\n  }, \"Ingredient\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\" // className=\"form-control\"\n    ,\n    id: \"ingred_detail\",\n    name: \"ingred_detail\",\n    value: ingredient.ingred_detail,\n    onChange: e => handleIngredientChange(index, e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleRemoveIngredientFields(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 37\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleAddIngredientFields(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 37\n    }\n  }, \"+\")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 25\n    }\n  }, \"Directions:\"), recipeStepState.map((recipe_step, index) => /*#__PURE__*/React.createElement(Fragment, {\n    key: `${recipe_step}~${index}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"recipe_step\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 37\n    }\n  }, \"Step\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"recipe_step\",\n    name: \"recipe_step\",\n    value: recipe_step.step_detail,\n    onChange: e => handleRecipeStepChange(index, e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleRemoveStepFields(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 37\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleAddStepFields(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 37\n    }\n  }, \"+\")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: displayFormHandler,\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, \"Cancel\")) : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: displayFormHandler,\n    className: \"add-recipe-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, \"+\"));\n}","map":{"version":3,"sources":["/Users/hannahkofkin/Development/code/mod-5-project/front-end/src/components/Recipes-Page/AddRecipe.js"],"names":["React","useState","Fragment","styled","LoadingBar","AddRecipe","props","state","setState","image","video","title","ingredientState","setIngredientState","ingred_detail","recipeStepState","setRecipeStepState","step_detail","displayFormHandler","setRecipeForm","prevState","changeHandler","e","persist","setFormState","target","name","value","console","log","formState","handleIngredientChange","index","values","ingredients","handleRecipeStepChange","recipe_steps","changeHandlerFiles","files","handleAddIngredientFields","push","handleRemoveIngredientFields","splice","handleAddStepFields","handleRemoveStepFields","handleRecipeCreation","activateLoadBar","preventDefault","token","localStorage","getItem","form","FormData","append","JSON","stringify","fetch","method","headers","body","then","r","json","newRecipe","renderNewRecipe","showLoadBar","recipeForm","map","ingredient","recipe_step"],"mappings":"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","sourcesContent":["import React, { useState, Fragment } from 'react'\nimport styled from 'styled-components';\nimport LoadingBar from './LoadingBar'\n\nexport default function AddRecipe(props) {\n\n    const [state, setState] = useState({\n        image: \"\",\n        video: \"\",\n        title: \"\",\n        // ingredients: [{ingred_detail: ''}],\n        // recipe_steps: [{step_detail: ''}]\n    })\n\n    const [ingredientState, setIngredientState] = useState([\n        {ingred_detail: ''}\n    ])\n\n    const [recipeStepState, setRecipeStepState] = useState([\n        {step_detail: ''}\n    ])\n\n    const displayFormHandler = () => {\n        props.setRecipeForm((prevState) => {\n          return !prevState;\n        });\n    };\n\n    const changeHandler = (e) => {\n        e.persist();\n        props.setFormState((prevState) => ({\n          ...prevState,\n          [e.target.name]: e.target.value,\n        }));\n        console.log(props.formState);\n    };\n\n    const handleIngredientChange = (index, e) => {\n        e.persist();\n        const values = [...ingredientState]\n        values[index].ingred_detail = e.target.value\n        setIngredientState(values)\n        props.setFormState((prevState) => ({\n            ...prevState,\n            ingredients: values\n        }));\n        console.log(props.formState)\n    }\n\n    const handleRecipeStepChange = (index, e) => {\n        e.persist();\n        const values = [...recipeStepState]\n        values[index].step_detail = e.target.value\n        setRecipeStepState(values)\n        props.setFormState((prevState) => ({\n            ...prevState,\n            recipe_steps: values\n        }));\n        console.log(props.formState)\n    }\n\n    const changeHandlerFiles = (e) => {\n        e.persist();\n        props.setFormState((prevState) => ({\n          ...prevState,\n          [e.target.name]: e.target.files[0],\n        }));\n        console.log(props.formState);\n    };\n\n    const handleAddIngredientFields = () => {\n        const values = [...ingredientState]\n        values.push({ingred_detail: ''})\n        setIngredientState(values)\n    }\n\n    const handleRemoveIngredientFields = (index) => {\n        const values = [...ingredientState]\n        values.splice(index, 1)\n        setIngredientState(values)\n    }\n\n    const handleAddStepFields = () => {\n        const values = [...recipeStepState]\n        values.push({step_detail: ''})\n        setRecipeStepState(values)\n    }\n\n    const handleRemoveStepFields = (index) => {\n        const values = [...recipeStepState]\n        values.splice(index, 1)\n        setRecipeStepState(values)\n    }\n\n    // const activateLoadBar = () => {\n    //     return <LoadingBar />\n    // }\n\n    const handleRecipeCreation = (e) => {\n        props.activateLoadBar()\n        e.preventDefault();\n        console.log(\"ingredients state\", ingredientState)\n        console.log(\"recipe state\", props.formState)\n        const token = localStorage.getItem(\"token\")\n\n        const form = new FormData()\n        form.append(\"image\", props.formState.image)\n        form.append(\"video\", props.formState.video)\n        form.append(\"title\", props.formState.title)\n        form.append(\"ingredients\", JSON.stringify(props.formState.ingredients))\n        form.append(\"recipe_steps\", JSON.stringify(props.formState.recipe_steps))\n\n        fetch(\"http://localhost:3000/recipes\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${token}`,\n            },\n            body: form,\n        })\n            .then((r) => r.json())\n            .then((newRecipe) => {\n                console.log(newRecipe)\n                props.renderNewRecipe((prevState => [newRecipe, ...prevState]))\n                props.setRecipeForm(false);\n            });\n        props.setFormState({image: \"\", video: \"\", title: \"\", ingredients: [{ingred_detail: ''}], recipe_steps: [{step_detail: ''}]});\n    };\n\n    const showLoadBar = () => {\n        return <LoadingBar />\n    }\n\n    return (\n        <>\n            {props.recipeForm ? (\n                <div className=\"modal\">\n                    <h1>New Recipe</h1>\n                    <form onSubmit={handleRecipeCreation}>\n                        <label>Image Upload:</label>\n                        <input type=\"file\" name=\"image\" onChange={changeHandlerFiles}/>\n                        <br/>\n                        <label>Video Upload</label>\n                        <input type=\"file\" name=\"video\" onChange={changeHandlerFiles}/>\n                        <br/>\n                        <label>Title:</label>\n                        <input type=\"text\" name=\"title\" onChange={changeHandler}/>\n                        <br/>\n                        <label>Ingredient List:</label>\n                        {ingredientState.map((ingredient, index) => (\n                            <Fragment key={`${ingredient}~${index}`}>\n                                <div>\n                                    <label htmlFor=\"ingred_detail\">Ingredient</label>\n                                    <input\n                                        type=\"text\"\n                                        // className=\"form-control\"\n                                        id=\"ingred_detail\"\n                                        name=\"ingred_detail\"\n                                        value={ingredient.ingred_detail}\n                                        onChange={e => handleIngredientChange(index, e)}\n                                    />\n                                </div>\n                                <div>\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => handleRemoveIngredientFields(index)}\n                                    >\n                                        -\n                                    </button>\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => handleAddIngredientFields()}\n                                    >\n                                        +\n                                    </button>\n                                </div>\n                            </Fragment>\n                        ))}\n                        {/* <input type=\"textarea\" name=\"ingred_list\" onChange={changeHandler}/> */}\n                        <br/>\n                        <label>Directions:</label>\n                        {recipeStepState.map((recipe_step, index) => (\n                            <Fragment key={`${recipe_step}~${index}`}>\n                                <div>\n                                    <label htmlFor=\"recipe_step\">Step</label>\n                                    <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        id=\"recipe_step\"\n                                        name=\"recipe_step\"\n                                        value={recipe_step.step_detail}\n                                        onChange={e => handleRecipeStepChange(index, e)}\n                                    />\n                                </div>\n                                <div>\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => handleRemoveStepFields(index)}\n                                    >\n                                        -\n                                    </button>\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => handleAddStepFields()}\n                                    >\n                                        +\n                                    </button>\n                                </div>\n                            </Fragment>\n                        ))}\n                        {/* <input type=\"textarea\" name=\"description\" onChange={changeHandler}/> */}\n                        <br/>\n                        <input type=\"submit\"/>\n                    </form>\n                    <button\n                        type=\"button\"\n                        onClick={displayFormHandler}\n                        className=\"\"\n                    >\n                        Cancel\n                    </button>\n                    {/* {() => showLoadBar} */}\n                </div>\n                ) : (\n                <button\n                    onClick={displayFormHandler}\n                    className=\"add-recipe-button\"\n                >\n                    +\n                </button>\n            )}\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}